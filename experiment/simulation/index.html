<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>NFA to DFA Conversion - Virtual Labs</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/virtual-labs/virtual-style@0.0.8-b/css/style.min.css">
  <link rel="stylesheet" href="./css/main.css">
  <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
</head>

<body class="body-padding">
  <!-- Mobile Navigation -->
  <div id="toggle-button-menu">
    <button class="toggle-instruction-menu" onclick="toggleInstructions()">Instructions</button>
    <button class="toggle-control-menu" onclick="toggleControls()">Controls</button>
  </div>

  <div class="container">
    <!-- Instructions Section -->
    <div class="columns is-centered">
      <div id="instruction-container" class="column instruction-container-hide">
        <div class="v-collapsible-instruction-container v-instruction-container instruction-container-background">
          <div id="instruction-title" class="v-collapsible is-size-5">Instructions</div>
          <div class="v-content" style="text-align: left; padding-left: 10%; padding-right: 10%;">
            <ul style="list-style: disc;">
              <li><strong>Select Example:</strong> Choose from predefined NFA examples to begin conversion</li>
              <li><strong>Convert NFA to DFA:</strong> Start the subset construction algorithm</li>
              <li><strong>Step Navigation:</strong> Use Previous/Next buttons to follow the conversion process</li>
              <li><strong>View Minimization:</strong> Optionally show DFA minimization process</li>
              <li><strong>Toggle Diagrams:</strong> Show or hide visual representations of automata</li>
              <li><strong>Reset:</strong> Return to initial state and select a new example</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Main Simulation Area -->
  <div class="main-container">
    <!-- Title -->
    <div class="converter-title">
      <h1>NFA to DFA Conversion using Subset Construction</h1>
      <p>Interactive demonstration of subset construction and DFA minimization algorithms</p>
    </div>

    <!-- Controls Section -->
    <div id="control-container" class="controls-section control-container-hide">
      <div class="control-group">
        <div class="control-item">
          <label class="control-label">Select Example:</label>
          <select id="example-selector" class="select-dropdown">
            <option value="0">Simple NFA with Œµ-transitions</option>
            <option value="1">NFA with multiple paths</option>
          </select>
        </div>
        
        <button id="convert-btn" class="btn btn-primary">
          <span>‚ö°</span> Convert NFA to DFA
        </button>
        
        <button id="reset-btn" class="btn btn-secondary">
          <span>üîÑ</span> Reset
        </button>
        
        <button id="toggle-diagrams-btn" class="btn btn-info">
          <span>üëÅÔ∏è</span> Toggle Diagrams
        </button>
      </div>
    </div>

    <!-- Simulation Content -->
    <div id="simulation-content">
      <!-- React component will be rendered here -->
    </div>

    <!-- Step Navigation (shown during conversion) -->
    <div id="step-navigation" class="steps-navigation" style="display: none; justify-content: center; margin: 20px 0;">
      <button id="prev-step-btn" class="btn btn-secondary">Previous</button>
      <span id="step-counter" class="step-counter">Step 1 of 1</span>
      <button id="next-step-btn" class="btn btn-secondary">Next</button>
    </div>

    <!-- Results Area -->
    <div id="results-area">
      <!-- Results will be populated here -->
    </div>

    <!-- Algorithm Overview -->
    <div class="algorithm-explanation">
      <h3>Algorithm Overview</h3>
      <div class="algorithm-grid">
        <div class="algorithm-section">
          <h4 style="color: #667eea;">Subset Construction (NFA ‚Üí DFA)</h4>
          <ol>
            <li>Start with Œµ-closure of NFA start state</li>
            <li>For each unmarked DFA state and alphabet symbol:
              <div class="sub-step">‚Ä¢ Compute move(state, symbol)</div>
              <div class="sub-step">‚Ä¢ Compute Œµ-closure of result</div>
              <div class="sub-step">‚Ä¢ Create new DFA state if needed</div>
            </li>
            <li>Repeat until no unmarked states remain</li>
            <li>Mark accept states (contain NFA accept states)</li>
          </ol>
        </div>
        <div class="algorithm-section">
          <h4 style="color: #11998e;">DFA Minimization</h4>
          <ol>
            <li>Create table of state pairs</li>
            <li>Mark pairs where one accepts, other doesn't</li>
            <li>For each unmarked pair (p,q):
              <div class="sub-step">‚Ä¢ Check if Œ¥(p,a) and Œ¥(q,a) are marked</div>
              <div class="sub-step">‚Ä¢ If so, mark (p,q) as distinguishable</div>
            </li>
            <li>Repeat until no new marks made</li>
            <li>Group unmarked pairs as equivalent states</li>
          </ol>
        </div>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/gh/virtual-labs/virtual-style@0.0.8-b/js/script.js"></script>
  <script src="./js/main.js"></script>

  <script>
    // Mobile navigation functions
    function toggleInstructions() {
      const container = document.getElementById('instruction-container');
      if (container.classList.contains('instruction-container-hide')) {
        container.classList.remove('instruction-container-hide');
        container.classList.add('instruction-container-show');
      } else {
        container.classList.remove('instruction-container-show');
        container.classList.add('instruction-container-hide');
      }
    }

    function toggleControls() {
      const container = document.getElementById('control-container');
      if (container.classList.contains('control-container-hide')) {
        container.classList.remove('control-container-hide');
        container.classList.add('control-container-show');
      } else {
        container.classList.remove('control-container-show');
        container.classList.add('control-container-hide');
      }
    }

    // Close mobile menus when clicking outside
    document.addEventListener('click', function(event) {
      const instructionContainer = document.getElementById('instruction-container');
      const controlContainer = document.getElementById('control-container');
      const toggleMenu = document.getElementById('toggle-button-menu');
      
      if (!toggleMenu.contains(event.target)) {
        if (instructionContainer.classList.contains('instruction-container-show')) {
          instructionContainer.classList.remove('instruction-container-show');
          instructionContainer.classList.add('instruction-container-hide');
        }
        if (controlContainer.classList.contains('control-container-show')) {
          controlContainer.classList.remove('control-container-show');
          controlContainer.classList.add('control-container-hide');
        }
      }
    });

    // Initialize the application
    document.addEventListener('DOMContentLoaded', function() {
      if (typeof initializeNFAToDFAConverter === 'function') {
        initializeNFAToDFAConverter();
      }
    });
  </script>
</body>

</html> 